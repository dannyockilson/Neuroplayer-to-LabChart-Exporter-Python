#!/usr/bin/env bash
# Git pre-push hook to run full test suite
# This ensures all tests pass before pushing

set -e

# Change to repo root directory
cd "$(git rev-parse --show-toplevel)"

echo "Running pre-push checks..."
echo ""

# Run the full test suite
echo "Running test suite..."
python -m pytest tests/ -v --tb=short

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ Tests failed! Push aborted."
    echo "Fix the failing tests before pushing."
    exit 1
fi

echo ""
echo "✅ All tests passed! Proceeding with push..."
exit 0
